# ==================== Environment ====================
ENV=development
DEBUG=true
LOG_LEVEL=INFO

# ==================== PostgreSQL Database ====================
# Single database with multiple schemas (auth, books, user_data, recommendations)
DB_HOST=minsik-postgres
DB_PORT=5432
DB_NAME=minsik_db
DB_USER=postgres
DB_PASSWORD=postgres

# Connection pooling
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ==================== Redis ====================
REDIS_HOST=minsik-redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=password
REDIS_MAX_CONNECTIONS=50

# ==================== Gateway Service ====================
GATEWAY_HTTP_PORT=8040
GATEWAY_HOST=0.0.0.0
GATEWAY_WORKERS=4

# gRPC Connection Pool
GRPC_POOL_SIZE=2
GRPC_KEEPALIVE_TIME_MS=30000
GRPC_KEEPALIVE_TIMEOUT_MS=5000
GRPC_TIMEOUT=5.0

# ==================== Auth Service ====================
AUTH_SERVICE_HOST=minsik-auth-service
AUTH_SERVICE_PORT=50051
AUTH_GRPC_PORT=50051

# ==================== Books Service ====================
BOOKS_SERVICE_HOST=minsik-books-service
BOOKS_SERVICE_PORT=50052
BOOKS_GRPC_PORT=50052

# ==================== Ingestion Service ====================
INGESTION_SERVICE_HOST=minsik-ingestion-service
INGESTION_SERVICE_PORT=50054
INGESTION_GRPC_PORT=50054

# ==================== User Data Service ====================
USER_DATA_SERVICE_HOST=minsik-userdata-service
USER_DATA_SERVICE_PORT=50053
USER_DATA_GRPC_PORT=50053

# ==================== Recommendation Service ====================
RECOMMENDATION_SERVICE_HOST=minsik-recommendation-service
RECOMMENDATION_SERVICE_PORT=50055
RECOMMENDATION_GRPC_PORT=50055

# ==================== External APIs ====================
# Open Library (primary data source)
OPEN_LIBRARY_API_URL=https://openlibrary.org
OPEN_LIBRARY_RATE_LIMIT=100

# Google Books (supplementary data source)
GOOGLE_BOOKS_API_URL=https://www.googleapis.com/books/v1
GOOGLE_BOOKS_API_KEY=

# ==================== Caching ====================
# Service-specific cache TTLs (seconds)
CACHE_TTL_BOOKS=3600
CACHE_TTL_AUTHORS=3600
CACHE_TTL_SEARCH=900
CACHE_TTL_RECOMMENDATIONS=604800

# Emergency cache for circuit breaker (10 minutes)
EMERGENCY_CACHE_TTL=600

# ==================== JWT Authentication ====================
# IMPORTANT: Change JWT_SECRET_KEY in production to a long random string
JWT_SECRET_KEY=7i0A1JTEf9UBfKChn380iTIAg4nhMziM
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ==================== Circuit Breaker ====================
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30
CIRCUIT_BREAKER_HALF_OPEN_MAX_CALLS=3

# ==================== Timeouts ====================
REDIS_TIMEOUT=1.0
REQUEST_TIMEOUT=30.0

# ==================== Observability ====================
METRICS_ENABLED=true
METRICS_PORT=9090

# ==================== Rate Limiting ====================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10
